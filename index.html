<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive Resume Intake</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- MODERN UI VARIABLES --- */
        :root {
            --primary: #2563eb; /* Corporate Blue */
            --primary-dark: #1e40af;
            --bg-page: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        /* --- GLOBAL RESET & TYPOGRAPHY --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .app-container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* --- HEADER UI --- */
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        h1 {
            font-weight: 700;
            font-size: 2.25rem;
            letter-spacing: -0.025em;
            margin-bottom: 10px;
            color: var(--text-main);
        }
        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* --- CARD DESIGN --- */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
            transition: transform 0.2s ease;
        }
        .card:focus-within {
            border-color: var(--primary);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2::before {
            content: '';
            display: block;
            width: 4px;
            height: 24px;
            background: var(--primary);
            border-radius: 2px;
        }

        /* --- FORM ELEMENTS --- */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 640px) { .grid-2 { grid-template-columns: 1fr; } }

        .form-group { margin-bottom: 20px; }
        
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-main);
            margin-bottom: 8px;
        }
        .label-hint {
            font-weight: 400;
            color: var(--text-muted);
            font-size: 0.8em;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
            color: var(--text-main);
            background: #fdfdfd;
            transition: all 0.2s;
            box-sizing: border-box;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* --- REPEATER SECTIONS --- */
        .repeater-item {
            background: #f8fafc;
            border: 1px dashed var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            position: relative;
        }
        .btn-remove {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: #ef4444;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 500;
        }
        .btn-remove:hover { text-decoration: underline; }

        /* --- BUTTONS --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-size: 0.95rem;
        }
        .btn-ghost {
            background: transparent;
            color: var(--primary);
            border: 1px dashed var(--primary);
            width: 100%;
        }
        .btn-ghost:hover { background: #eff6ff; }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
            margin-top: 20px;
        }
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        /* --- TOGGLE SWITCH --- */
        .toggle-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding: 16px;
            background: #f0f9ff;
            border-radius: 8px;
            border: 1px solid #bae6fd;
        }
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
        }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="app-container">
        <header>
            <h1>Career Intake Suite</h1>
            <p class="subtitle">Fill in your details below, Be honest, Be thurough, Dont stress if youre unsure what to put just move on and come back or leave blank. Once received by our team, your information will be transformed into three documents, (1) executive-standard resume, (2) ATS-optimized resume, (3) Cover letter (if requested).</p>
        </header>

        <form id="resumeForm">
            <div class="card">
                <h2>Personal Information</h2>
                <div class="grid-2">
                    <div class="form-group">
                        <label>First & Last Name</label>
                        <input type="text" id="fullName" placeholder="e.g. Alex Morgan" required>
                    </div>
                    <div class="form-group">
                        <label>Target Job Title</label>
                        <input type="text" id="targetTitle" placeholder="e.g. Senior Product Manager">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="phone">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label>LinkedIn URL</label>
                        <input type="text" id="linkedin" placeholder="linkedin.com/in/...">
                    </div>
                    <div class="form-group">
                        <label>City, State</label>
                        <input type="text" id="location" placeholder="e.g. New York, NY">
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Executive Summary</h2>
                <div class="form-group">
                    <label>Professional Bio <span class="label-hint">(Keep it under 4 lines)</span></label>
                    <textarea id="summary" placeholder="Results-oriented professional with 10+ years of experience driving revenue growth..."></textarea>
                </div>
                <div class="form-group">
                    <label>Core Competencies <span class="label-hint">(Separate with commas)</span></label>
                    <input type="text" id="skills" placeholder="Strategic Planning, P&L Management, Agile Methodology, SQL, Team Leadership">
                </div>
            </div>

            <div class="card">
                <h2>Professional Experience</h2>
                <div id="jobsContainer"></div>
                <button type="button" class="btn btn-ghost" onclick="addJob()">+ Add Position</button>
            </div>

            <div class="card">
                <h2>Education</h2>
                <div id="eduContainer"></div>
                <button type="button" class="btn btn-ghost" onclick="addEducation()">+ Add Degree</button>
            </div>

            <div class="card">
                <h2>Cover Letter Generation</h2>
                <div class="toggle-wrapper">
                    <input type="checkbox" id="includeCoverLetter">
                    <label style="margin:0; cursor:pointer;" for="includeCoverLetter"><strong>Generate Matching Cover Letter</strong></label>
                </div>
                
                <div id="coverLetterFields" class="hidden">
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Hiring Manager Name</label>
                            <input type="text" id="hiringManager" placeholder="e.g. Hiring Team">
                        </div>
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" id="targetCompany" placeholder="e.g. Google">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>The "Why" <span class="label-hint">(Why this specific role?)</span></label>
                        <textarea id="clBody" style="height: 150px;" placeholder="I am writing to express my enthusiasm for the position..."></textarea>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Generate Professional Resume</button>
            <p style="text-align: center; color: var(--text-muted); font-size: 0.85rem; margin-top: 15px;">
                Outputs standard PDF ready for LinkedIn & Greenhouse.
            </p>
        </form>
    </div>

<script>
    /**
     * UI LOGIC: Repeater Fields
     * Uses a clean UUID generator to manage DOM elements easily.
     */
    const createUUID = () => 'id' + Math.random().toString(36).substr(2, 9);

    function addJob() {
        const id = createUUID();
        const html = `
            <div class="repeater-item" id="${id}">
                <button type="button" class="btn-remove" onclick="document.getElementById('${id}').remove()">Remove</button>
                <div class="grid-2">
                    <div class="form-group"><label>Company Name</label><input type="text" class="job-company"></div>
                    <div class="form-group"><label>Job Title</label><input type="text" class="job-title"></div>
                </div>
                <div class="grid-2">
                    <div class="form-group"><label>Location</label><input type="text" class="job-location" placeholder="City, State"></div>
                    <div class="form-group"><label>Date Range</label><input type="text" class="job-dates" placeholder="Jan 2020 - Present"></div>
                </div>
                <div class="form-group">
                    <label>Key Achievements <span class="label-hint">(Start lines with action verbs)</span></label>
                    <textarea class="job-desc" placeholder="• Spearheaded a new initiative that reduced costs by 15%&#10;• Managed a cross-functional team of 10"></textarea>
                </div>
            </div>`;
        document.getElementById('jobsContainer').insertAdjacentHTML('beforeend', html);
    }

    function addEducation() {
        const id = createUUID();
        const html = `
            <div class="repeater-item" id="${id}">
                <button type="button" class="btn-remove" onclick="document.getElementById('${id}').remove()">Remove</button>
                <div class="form-group"><label>University / School</label><input type="text" class="edu-school"></div>
                <div class="grid-2">
                    <div class="form-group"><label>Degree / Major</label><input type="text" class="edu-degree"></div>
                    <div class="form-group"><label>Graduation Year</label><input type="text" class="edu-year"></div>
                </div>
            </div>`;
        document.getElementById('eduContainer').insertAdjacentHTML('beforeend', html);
    }

    // Init form with 1 empty slot each
    addJob();
    addEducation();

    // Toggle Visibility
    document.getElementById('includeCoverLetter').addEventListener('change', (e) => {
        const section = document.getElementById('coverLetterFields');
        section.style.display = e.target.checked ? 'block' : 'none';
    });

    /**
     * PDF GENERATION LOGIC
     * Implements "Harvard Layout" Theory:
     * - Serif fonts for headers (Authority), Sans-serif for body (Readability) OR All Sans (Modern)
     * - Left-Right alignment for scanning
     * - Strict margins
     */
    document.getElementById('resumeForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ format: 'letter', unit: 'pt' }); // Using points for precise typography
        
        // --- DESIGN CONSTANTS ---
        const MARGIN = 50;
        const PAGE_WIDTH = 612; // Letter width in pt
        const CONTENT_WIDTH = PAGE_WIDTH - (MARGIN * 2);
        const PAGE_HEIGHT = 792;
        
        const COLORS = {
            HEAD: '#111111',
            TEXT: '#333333',
            ACCENT: '#2563eb', // Matches UI Blue
            LINE: '#dddddd'
        };

        // Typography Config (Using Standard Fonts for ATS Safety)
        const FONTS = {
            BOLD: 'helvetica',
            NORMAL: 'helvetica',
            STYLE_BOLD: 'bold',
            STYLE_NORM: 'normal',
            STYLE_ITALIC: 'italic'
        };

        let cursorY = 50;

        // --- HELPER FUNCTIONS ---
        const checkPageBreak = (spaceNeeded) => {
            if (cursorY + spaceNeeded > PAGE_HEIGHT - MARGIN) {
                doc.addPage();
                cursorY = MARGIN;
            }
        };

        const drawSectionHeader = (title) => {
            checkPageBreak(30);
            cursorY += 10;
            doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
            doc.setFontSize(10);
            doc.setTextColor(COLORS.ACCENT);
            doc.text(title.toUpperCase(), MARGIN, cursorY);
            
            cursorY += 6;
            doc.setDrawColor(COLORS.LINE);
            doc.setLineWidth(0.5);
            doc.line(MARGIN, cursorY, MARGIN + CONTENT_WIDTH, cursorY);
            
            cursorY += 15;
        };

        // --- DATA COLLECTION ---
        const data = {
            name: document.getElementById('fullName').value,
            title: document.getElementById('targetTitle').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            linkedin: document.getElementById('linkedin').value,
            location: document.getElementById('location').value,
            summary: document.getElementById('summary').value,
            skills: document.getElementById('skills').value,
            jobs: Array.from(document.querySelectorAll('#jobsContainer .repeater-item')).map(el => ({
                company: el.querySelector('.job-company').value,
                title: el.querySelector('.job-title').value,
                location: el.querySelector('.job-location').value,
                dates: el.querySelector('.job-dates').value,
                desc: el.querySelector('.job-desc').value
            })),
            edu: Array.from(document.querySelectorAll('#eduContainer .repeater-item')).map(el => ({
                school: el.querySelector('.edu-school').value,
                degree: el.querySelector('.edu-degree').value,
                year: el.querySelector('.edu-year').value
            }))
        };

        // ============================
        //  PAGE 1: COVER LETTER (OPT)
        // ============================
        if (document.getElementById('includeCoverLetter').checked) {
            // Header
            doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
            doc.setFontSize(24);
            doc.setTextColor(COLORS.HEAD);
            doc.text(data.name, MARGIN, cursorY);
            
            cursorY += 18;
            doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
            doc.setFontSize(10);
            doc.setTextColor(COLORS.TEXT);
            
            const contactLine = [data.email, data.phone, data.linkedin].filter(Boolean).join('  |  ');
            doc.text(contactLine, MARGIN, cursorY);
            
            cursorY += 40;
            
            // Recipient Info
            doc.text(new Date().toLocaleDateString(), MARGIN, cursorY);
            cursorY += 14;
            
            const manager = document.getElementById('hiringManager').value || 'Hiring Manager';
            const company = document.getElementById('targetCompany').value;
            doc.text(manager, MARGIN, cursorY);
            if(company) { cursorY += 14; doc.text(company, MARGIN, cursorY); }
            
            cursorY += 30;
            doc.text(`Dear ${manager},`, MARGIN, cursorY);
            cursorY += 20;
            
            // Body
            const clBody = document.getElementById('clBody').value;
            const splitBody = doc.splitTextToSize(clBody, CONTENT_WIDTH);
            doc.text(splitBody, MARGIN, cursorY);
            
            cursorY += (splitBody.length * 14) + 30;
            doc.text("Sincerely,", MARGIN, cursorY);
            cursorY += 25;
            doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
            doc.text(data.name, MARGIN, cursorY);
            
            doc.addPage();
            cursorY = MARGIN; // Reset for Resume
        }

        // ============================
        //  PAGE 2+: RESUME
        // ============================
        
        // --- HEADER ---
        doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
        doc.setFontSize(26);
        doc.setTextColor(COLORS.HEAD);
        doc.text(data.name.toUpperCase(), MARGIN, cursorY);
        
        cursorY += 20;
        doc.setFontSize(11);
        doc.setTextColor(COLORS.ACCENT);
        doc.text(data.title.toUpperCase(), MARGIN, cursorY);
        
        cursorY += 15;
        doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
        doc.setFontSize(9);
        doc.setTextColor(COLORS.TEXT);
        const contactInfo = [data.location, data.email, data.phone, data.linkedin].filter(Boolean).join('  •  ');
        doc.text(contactInfo, MARGIN, cursorY);

        // --- SUMMARY ---
        if(data.summary) {
            cursorY += 20;
            drawSectionHeader("Professional Summary");
            doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
            doc.setTextColor(COLORS.TEXT);
            const sumLines = doc.splitTextToSize(data.summary, CONTENT_WIDTH);
            doc.text(sumLines, MARGIN, cursorY);
            cursorY += (sumLines.length * 12);
        }

        // --- SKILLS ---
        if(data.skills) {
            drawSectionHeader("Core Competencies");
            doc.setFontSize(9);
            const skills = doc.splitTextToSize(data.skills, CONTENT_WIDTH);
            doc.text(skills, MARGIN, cursorY);
            cursorY += (skills.length * 12);
        }

        // --- EXPERIENCE ---
        if(data.jobs.length > 0) {
            drawSectionHeader("Professional Experience");
            
            data.jobs.forEach(job => {
                checkPageBreak(40);
                
                // Line 1: Company (Left) | Location (Right)
                doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
                doc.setFontSize(10);
                doc.setTextColor(COLORS.HEAD);
                doc.text(job.company, MARGIN, cursorY);
                
                doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
                doc.text(job.location, PAGE_WIDTH - MARGIN, cursorY, { align: 'right' });
                
                cursorY += 12;
                
                // Line 2: Title (Left) | Dates (Right)
                doc.setFont(FONTS.NORMAL, FONTS.STYLE_ITALIC);
                doc.setTextColor(COLORS.TEXT);
                doc.text(job.title, MARGIN, cursorY);
                
                doc.text(job.dates, PAGE_WIDTH - MARGIN, cursorY, { align: 'right' });
                
                cursorY += 14;
                
                // Description (Bullets)
                doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
                const descLines = doc.splitTextToSize(job.desc, CONTENT_WIDTH - 10);
                doc.text(descLines, MARGIN + 10, cursorY);
                
                cursorY += (descLines.length * 12) + 10; // Extra spacing between jobs
            });
        }

        // --- EDUCATION ---
        if(data.edu.length > 0) {
            drawSectionHeader("Education");
            
            data.edu.forEach(edu => {
                checkPageBreak(30);
                doc.setFont(FONTS.BOLD, FONTS.STYLE_BOLD);
                doc.setFontSize(10);
                doc.setTextColor(COLORS.HEAD);
                doc.text(edu.school, MARGIN, cursorY);
                
                doc.setFont(FONTS.NORMAL, FONTS.STYLE_NORM);
                doc.text(edu.year, PAGE_WIDTH - MARGIN, cursorY, { align: 'right' });
                
                cursorY += 12;
                doc.setFont(FONTS.NORMAL, FONTS.STYLE_ITALIC);
                doc.setTextColor(COLORS.TEXT);
                doc.text(edu.degree, MARGIN, cursorY);
                
                cursorY += 20;
            });
        }

        // Save
        const fileName = data.name.replace(/ /g, '_') + '_Resume.pdf';
        doc.save(fileName);
    });
</script>

</body>
</html>
